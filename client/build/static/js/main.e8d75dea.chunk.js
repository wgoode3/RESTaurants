(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{30:function(e,t,a){},31:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var c=a(0),s=a(1),n=a.n(s),r=a(22),i=a.n(r),l=(a(30),a.p,a(31),a(32),a(5)),o=a(2),j=a(10),d=a(9),b=a(11),u=a(4),h=a.n(u);var m=function(e){var t=Object(s.useState)([]),a=Object(o.a)(t,2),n=a[0],r=a[1],i=Object(s.useState)(""),u=Object(o.a)(i,2),m=u[0],O=u[1];function x(){h.a.get("http://localhost:8000/api/restaurants").then((function(e){console.log(e),r(function(e){for(var t=Object(b.a)(e),a=0;a<t.length;a++)for(var c=0;c<t.length-a-1;c++)if(t[c].avgRating<t[c+1].avgRating){var s=[t[c+1],t[c]];t[c]=s[0],t[c+1]=s[1]}return t}(function(e){var t,a=[],c=Object(d.a)(e);try{for(c.s();!(t=c.n()).done;){var s=t.value;if(s.reviews.length<1)a.push(Object(j.a)(Object(j.a)({},s),{},{avgRating:0}));else{var n,r=0,i=Object(d.a)(s.reviews);try{for(i.s();!(n=i.n()).done;)r+=n.value.rating}catch(l){i.e(l)}finally{i.f()}a.push(Object(j.a)(Object(j.a)({},s),{},{avgRating:r/s.reviews.length}))}}}catch(l){c.e(l)}finally{c.f()}return a}(e.data)))})).catch((function(e){return console.error(e)}))}Object(s.useEffect)((function(){x()}),[]);return Object(c.jsxs)("div",{className:"row my-3",children:[Object(c.jsx)("div",{className:"col-sm-6 offset-sm-3",children:Object(c.jsx)("input",{type:"search",placeholder:"search",name:"q",className:"form-control my-3",value:m,onChange:function(e){return O(e.target.value)}})}),n.filter((function(e){return e.name.toLowerCase().includes(m.toLowerCase())})).length<1?Object(c.jsx)("p",{className:"col-sm-12",children:"No results"}):"",n.filter((function(e){return e.name.toLowerCase().includes(m.toLowerCase())})).map((function(e){return Object(c.jsx)("div",{className:"col-sm-12",children:Object(c.jsxs)("div",{className:"card mt-3",children:[Object(c.jsx)("div",{className:"card-header bg-dark text-light",children:e.name}),Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsxs)("p",{children:["Cuisine: ",e.cuisine]}),Object(c.jsxs)("p",{children:["Year Established: ",e.yearEstablished]}),Object(c.jsxs)("p",{children:["Description: ",e.description]}),Object(c.jsxs)("p",{children:["Average Rating: ",e.avgRating?e.avgRating.toFixed(1):"no reviews yet :("]}),Object(c.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(c.jsx)(l.a,{to:"/view/".concat(e._id),className:"btn btn-outline-success",children:"View"}),Object(c.jsx)(l.a,{to:"/edit/".concat(e._id),className:"btn btn-outline-info",children:"Edit"}),Object(c.jsx)("button",{className:"btn btn-outline-danger",onClick:function(t){return a=e._id,void h.a.delete("http://localhost:8000/api/restaurants/".concat(a)).then((function(e){console.log(e),x()})).catch((function(e){return console.error(e)}));var a},children:"Remove"})]})]})]})},e._id)}))]})},O=function(e){var t=Object(s.useState)(""),a=Object(o.a)(t,2),n=a[0],r=a[1],i=Object(s.useState)(""),j=Object(o.a)(i,2),d=j[0],b=j[1],u=Object(s.useState)(2e3),m=Object(o.a)(u,2),O=m[0],x=m[1],v=Object(s.useState)(""),g=Object(o.a)(v,2),p=g[0],f=g[1],N=Object(s.useState)({}),y=Object(o.a)(N,2),w=y[0],C=y[1];return Object(c.jsx)("div",{className:"row my-5",children:Object(c.jsx)("div",{className:"col-sm-8 offset-sm-2",children:Object(c.jsxs)("div",{className:"card",children:[Object(c.jsx)("div",{className:"card-header bg-dark text-light",children:"Add Restaurant"}),Object(c.jsx)("div",{className:"card-body",children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={name:n,cuisine:d,yearEstablished:O,description:p};h.a.post("http://localhost:8000/api/restaurants",t).then((function(e){console.log(e),e.data.errors?C(e.data.errors):Object(l.c)("/")})).catch((function(e){console.error(e)}))},children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Name:"}),Object(c.jsx)("input",{type:"text",className:"form-control",name:"name",value:n,onChange:function(e){return r(e.target.value)}}),Object(c.jsx)("p",{className:"text-danger",children:w.name?w.name.message:""})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Cuisine:"}),Object(c.jsx)("input",{type:"text",className:"form-control",name:"cuisine",value:d,onChange:function(e){return b(e.target.value)}}),Object(c.jsx)("p",{className:"text-danger",children:w.cuisine?w.cuisine.message:""})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Year Established:"}),Object(c.jsx)("input",{type:"number",className:"form-control",name:"yearEstablished",value:O,onChange:function(e){return x(e.target.value)}}),Object(c.jsx)("p",{className:"text-danger",children:w.yearEstablished?w.yearEstablished.message:""})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Description:"}),Object(c.jsx)("textarea",{name:"description",className:"form-control",value:p,onChange:function(e){return f(e.target.value)}}),Object(c.jsx)("p",{className:"text-danger",children:w.description?w.description.message:""})]}),Object(c.jsx)("input",{type:"submit",value:"Add Restaurant",className:"btn btn-info btn-block"})]})})]})})})},x=function(e){var t=Object(s.useState)(""),a=Object(o.a)(t,2),n=a[0],r=a[1],i=Object(s.useState)(""),j=Object(o.a)(i,2),d=j[0],b=j[1],u=Object(s.useState)(2e3),m=Object(o.a)(u,2),O=m[0],x=m[1],v=Object(s.useState)(""),g=Object(o.a)(v,2),p=g[0],f=g[1],N=Object(s.useState)({}),y=Object(o.a)(N,2),w=y[0],C=y[1];Object(s.useEffect)((function(){console.log(e._id),h.a.get("http://localhost:8000/api/restaurants/".concat(e._id)).then((function(e){console.log(e),r(e.data.name),b(e.data.cuisine),x(e.data.yearEstablished),f(e.data.description)})).catch((function(e){return console.error(e)}))}),[e._id]);return Object(c.jsx)("div",{className:"row my-5",children:Object(c.jsx)("div",{className:"col-sm-8 offset-sm-2",children:Object(c.jsxs)("div",{className:"card",children:[Object(c.jsx)("div",{className:"card-header bg-dark text-light",children:"Update Restaurant"}),Object(c.jsx)("div",{className:"card-body",children:Object(c.jsxs)("form",{onSubmit:function(t){t.preventDefault();var a={name:n,cuisine:d,yearEstablished:O,description:p};h.a.put("http://localhost:8000/api/restaurants/".concat(e._id),a).then((function(e){console.log(e),e.data.errors?C(e.data.errors):Object(l.c)("/")})).catch((function(e){console.error(e)}))},children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Name:"}),Object(c.jsx)("input",{type:"text",className:"form-control",name:"name",value:n,onChange:function(e){return r(e.target.value)}}),Object(c.jsx)("p",{className:"text-danger",children:w.name?w.name.message:""})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Cuisine:"}),Object(c.jsx)("input",{type:"text",className:"form-control",name:"cuisine",value:d,onChange:function(e){return b(e.target.value)}}),Object(c.jsx)("p",{className:"text-danger",children:w.cuisine?w.cuisine.message:""})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Year Established:"}),Object(c.jsx)("input",{type:"number",className:"form-control",name:"yearEstablished",value:O,onChange:function(e){return x(e.target.value)}}),Object(c.jsx)("p",{className:"text-danger",children:w.yearEstablished?w.yearEstablished.message:""})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Description:"}),Object(c.jsx)("textarea",{name:"description",className:"form-control",value:p,onChange:function(e){return f(e.target.value)}}),Object(c.jsx)("p",{className:"text-danger",children:w.description?w.description.message:""})]}),Object(c.jsx)("input",{type:"submit",value:"Update Restaurant",className:"btn btn-info btn-block"})]})})]})})})};var v=function(e){return Object(c.jsxs)("span",{children:[Array(e.rating+1).join("\u2605"),Array(5-e.rating+1).join("\u2606")]})},g=a(24),p=a.n(g);function f(e){if(e.length<1)return"no reviews yet :(";var t,a=0,c=Object(d.a)(e);try{for(c.s();!(t=c.n()).done;){a+=t.value.rating}}catch(s){c.e(s)}finally{c.f()}return(a/e.length).toFixed(1)}Array.prototype.reverseCopy=function(){var e=Object(b.a)(this);return e.reverse(),e};var N=function(e){var t=Object(s.useState)({reviews:[]}),a=Object(o.a)(t,2),n=a[0],r=a[1],i=Object(s.useState)(""),l=Object(o.a)(i,2),j=l[0],d=l[1],b=Object(s.useState)("3"),u=Object(o.a)(b,2),m=u[0],O=u[1],x=Object(s.useState)(""),g=Object(o.a)(x,2),N=g[0],y=g[1],w=Object(s.useState)({}),C=Object(o.a)(w,2),S=C[0],E=C[1];function R(){h.a.get("http://localhost:8000/api/restaurants/".concat(e._id)).then((function(e){console.log(e),r(e.data)})).catch((function(e){return console.error(e)}))}Object(s.useEffect)((function(){console.log(e._id),R()}),[e._id]);return Object(c.jsxs)("div",{className:"row my-5",children:[Object(c.jsxs)("div",{className:"col-sm-6",children:[Object(c.jsxs)("div",{className:"card",children:[Object(c.jsx)("div",{className:"card-header bg-dark text-light",children:n.name}),Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsxs)("p",{children:["Cuisine: ",n.cuisine]}),Object(c.jsxs)("p",{children:["Year Established: ",n.yearEstablished]}),Object(c.jsxs)("p",{children:["Description: ",n.description]}),Object(c.jsxs)("p",{children:["Average rating: ",f(n.reviews)]})]})]}),Object(c.jsxs)("div",{className:"card mt-3",children:[Object(c.jsx)("div",{className:"card-header bg-dark text-light",children:"Reviews"}),Object(c.jsx)("div",{className:"card-body",children:Object(c.jsxs)("form",{onSubmit:function(t){t.preventDefault();var a={name:j,rating:m,content:N};h.a.post("http://localhost:8000/api/restaurants/".concat(e._id,"/review"),a).then((function(e){console.log(e),e.data.errors?E(e.data.errors):(R(),E({}),d(""),y(""),O("3"))})).catch((function(e){return console.error(e)}))},children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Reviewer Name"}),Object(c.jsx)("input",{type:"text",className:"form-control",value:j,onChange:function(e){return d(e.target.value)}}),Object(c.jsx)("p",{className:"text-danger",children:S.name?S.name.message:""})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Rating"}),Object(c.jsxs)("select",{className:"form-control",value:m,onChange:function(e){return O(e.target.value)},children:[Object(c.jsx)("option",{value:"1",children:"\u2605\u2606\u2606\u2606\u2606"}),Object(c.jsx)("option",{value:"2",children:"\u2605\u2605\u2606\u2606\u2606"}),Object(c.jsx)("option",{value:"3",children:"\u2605\u2605\u2605\u2606\u2606"}),Object(c.jsx)("option",{value:"4",children:"\u2605\u2605\u2605\u2605\u2606"}),Object(c.jsx)("option",{value:"5",children:"\u2605\u2605\u2605\u2605\u2605"})]}),Object(c.jsx)("p",{className:"text-danger",children:S.rating?S.rating.message:""})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Reviewer Text"}),Object(c.jsx)("textarea",{className:"form-control",value:N,onChange:function(e){return y(e.target.value)}}),Object(c.jsx)("p",{className:"text-danger",children:S.content?S.content.message:""})]}),Object(c.jsx)("input",{type:"submit",value:"Leave Review",className:"btn btn-primary"})]})})]})]}),Object(c.jsx)("div",{className:"col-sm-6",children:Object(c.jsxs)("ul",{className:"list-group",children:[Object(c.jsx)("li",{className:"list-group-item bg-dark text-light",children:"Reviews"}),n.reviews.reverseCopy().map((function(e){return Object(c.jsxs)("li",{className:"list-group-item",children:[Object(c.jsx)(v,{rating:e.rating}),Object(c.jsx)("br",{}),Object(c.jsxs)("strong",{children:[e.name," says: "]})," ",e.content,Object(c.jsx)("p",{children:p()(e.createdAt).fromNow()})]},e._id)}))]})})]})};var y=function(){return Object(c.jsxs)("div",{className:"container",children:[Object(c.jsxs)("h1",{children:[Object(c.jsx)("span",{className:"text-info",children:"REST"}),"aurants"]}),Object(c.jsx)(l.a,{to:"/",className:"btn btn-outline-primary",children:"View All"}),Object(c.jsx)(l.a,{to:"/new",className:"btn btn-outline-primary",children:"Add Restauraunt"}),Object(c.jsxs)(l.b,{children:[Object(c.jsx)(m,{path:"/"}),Object(c.jsx)(O,{path:"/new"}),Object(c.jsx)(x,{path:"/edit/:_id"}),Object(c.jsx)(N,{path:"/view/:_id"})]})]})},w=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,58)).then((function(t){var a=t.getCLS,c=t.getFID,s=t.getFCP,n=t.getLCP,r=t.getTTFB;a(e),c(e),s(e),n(e),r(e)}))};i.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(y,{})}),document.getElementById("root")),w()}},[[57,1,2]]]);
//# sourceMappingURL=main.e8d75dea.chunk.js.map